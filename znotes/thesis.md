## part1

## part2

## part3

## part4

PTQ

那Post training quantization是不是就毫无用处了呢？显然不是。

1. Post training quantization在一些相对”重“的模型上，精度损失很小
2. Quantization-aware training训练速度会慢一些，
3. Post training quantization只需要模型就可以完成，比如如果模型是从其他训练框架转换而来，这时候就只能使用Post training quantization

##### (1). PTQ 4bit intel nips2019

本文ACIQ首次针对4比特PTQ（Post-training Quantization）展开研究。1）==ACIQ以优化分析角度求解最优的截断值==，以提升量化损失（针对激活值）; 2）per-channel的比特数分配 (针对权重和激活值)；3）[bias-correction](https://www.zhihu.com/search?q=bias-correction&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"article"%2C"sourceId"%3A366943138}) (量化偏移纠正，针对权重)。

**个人看法：**针对贡献1，本人很少看到有人在实际量化时 **使用ACIQ计算激活截断值**的方式，==一般量化推理框架都是采用max-min、MSE或者KL散度方式计算激活截断值，进而得到激活值量化系数scale（对于权重的量化系数，一般采用min-max方式即可）==；针对贡献2，相当于是per-channel的混合精度量化，只能说这一方法比较偏学术研究，个人认为在工业应用中实际价值不大，比较难落地应用；针对贡献3，后续有不少相关PTQ论文沿用这一方式弥补量化精度损失，如论文[PWLQ（ECCV2020）](https://link.zhihu.com/?target=https%3A//arxiv.org/pdf/2002.00104.pdf)。

##### (2). Low-bit Quant for Efficient Inference（ICCV Workshop2019）huawei

**主要贡献：**本文主要考虑均匀量化（硬件友好）。1）针对权重，使用更细粒度的kernel-wise量化；2）针对激活值，提出使用MSE优化量化系数 Scale；3）对于某些重要层，使用多个量化值及系数进行[线性求和](https://www.zhihu.com/search?q=线性求和&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"article"%2C"sourceId"%3A366943138})。

**个人看法：**均匀量化是硬件友好的量化方式，并且也是当前工业界落地使用的主流方式。针对 贡献1，kernel-wise权重量化是比per-channel权重量化更细粒度的方式，虽然性能上会有一些提升，但kernel-wise权重量化硬件不太友好（需要存储更多scale，频繁读取），所以该方式应该不常见，得不偿失；针对贡献2，该方式是比较常见的激活值的量化系数优化方法，目前不少主流量化推理框架也支持这一方式（如NCNN, TNN, MNN等）；针对贡献3，也是目前工业落地不太现实的方式。

##### (3). Data-Free quant qualcomm ICCV2019

**主要贡献：**本文DFQ通过模型权重均衡化与偏移纠正，从而实现per-layer的训练后量化算法（per-layer量化比per-channel量化更硬件友好）。1）不用量化训练，也不需要校对数据来确定量化参数；2）权重均衡（per-channel量化 -> per-layer量化）。本文DFQ利用激活函数ReLU的数学性质，均衡相邻两层权重各通道的数据范围，使得per-layer的量化方法能结合per-channel的优势（以此确定激活值的[量化系数](https://www.zhihu.com/search?q=量化系数&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"article"%2C"sourceId"%3A366943138})，另外，该论文采用min-max方式确定权重的量化系数），弥补量化损失；3）量化偏移纠正，以微调模型权重。

**个人看法：**DFQ较早就提出Data-free与PTQ（Post-training Quantization）相结合的思想（主要针对8比特的权重和激活值量化），是该领域早期较为经典的论文方法，也被经常用来比较，且是高通出品。针对贡献1，无需训练且无需校对数据，是工业界喜欢的量化方式，使用简单方便；针对贡献2，是一个性能和推理效率的平衡问题，per-layer权重量化硬件更加友好，但性能比per-channel方式差；per-channel权重量化比per-layer方式更复杂，但性能更好些。目前不少主流量化推理框架（如NCNN, TNN, MNN等）一般两种方式都支持；针对贡献3，是目前PTQ论文研究的标配，通常都会采用以弥补量化损失。

##### (4). PWLQ samsung ECCV2020

**主要贡献：**在PTQ（Post-training Quantization）设置下**，**线性量化（即均匀量化）在比特数较低或极低情况下，性能下降严重。对此，本文提出了[分段线性量化PWL](https://www.zhihu.com/search?q=分段线性量化PWL&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra={"sourceType"%3A"article"%2C"sourceId"%3A366943138})Q以解决这一问题，无需再训练，仅需少量校对数据。同时，本文给出了寻找最优分段断点的解决方案，以获得更低的量化误差。

**个人看法：**本文提出的分段线性量化PWLQ想法简单明了，直觉上就令人觉得有效。并且论文故事讲得挺好，行文也有理有据，问题陈述和定义清晰，且有加以图表说明，方法重要部分有数学证明加持，实验也是挺充分的。但是，有一个问题就是，在普遍的硬件设备上应该无法直接应用，所以需要特定硬件设备才能配合使用。

##### OCS ICML2019 

通过Net2WiderNet，使得极端值减少，更适合线性量化，但增加了部分复杂度，（通道变宽——参数增加，则更容易拟合，极端值更少，更平滑）

#### AdaRound

#### AdaQuant



### 致谢

行文至此，思绪万千，铭感五内，提笔忘言。

在MIN实验室度过了我研究生生涯的两年半，发生了许多事，虽然有各种各样的曲折，但有幸能遇到实验室如此多良师益友，给了我极大的帮助，不仅是专业知识，更是未来人生路上的光和热。

萍水相逢，尽是他乡之客。加入MIN大家庭是如此幸运地一件事，我们如浮萍般短暂的相遇，也许毕业将难以再见，但如此幸运能够相遇，感谢MIN实验室的大家，科研路上有人相伴是一件幸福的事，也是我不断前行的动力与支持。

饮水思源，感谢熊红凯教授，邹君妮教授，戴文睿大师兄，费文师兄的指导，在迷茫时点醒我，敦促我，帮助我，师恩难忘，字短情长。

大都好物不坚牢，彩云易散琉璃脆。此时相望不相闻，愿逐月华流照君。感谢414的各位同学的陪伴与帮助，为我的研究生生活填满了色彩与温暖，与你们相识让我不再孤独，不会不安。毕业后大家各自忙碌，奔向远方，但我依然会想起大家，如同每晚一起回宿舍时路上的月光一样。

最是别离处，草木皆有情。在交大度过了六年半的日子，越是离别之际越是情难自已。感谢交大，也感谢自己。象牙塔内的生活即将结束，感谢这些年的选择与坚持，走到现在，也许走入社会后会遇到各种阻碍，但是我相信，我会克服所有的不顺，我会坚持在象牙塔内的初心。

往来千里路长在，聚散十年人不同。但见时光流似箭，岂知天道曲如弓。





## 评审意见1

（技术相关问题） 1）英文摘要：“本文提出的混合精度量化方法是第一个在基于U-Net的医学图像分割上的工作“，那么是否有对于一般U-Net结构的混合精度量化方法，或者基于U-Net的其他医学图像任务的混合精度量化方法？相比于这些方法，基于U-Net的医学图像分割任务会带来什么样的技术挑战？

 2）第31页：穷举搜索的复杂度为O(M^N)? 3）式（3-4）：该优化问题中每一项（包括优化目标、约束条件）的物理意义没有很好的介绍，而这一优化问题建模为本论文混合精度量化的核心问题。 

4）算法3-1和3-2：从论文自包含性的角度，需要简要介绍例如Htchinson算法、Parato最优前沿等已有工作的简单原理，以及是如何在本文中使用的。

 5）第3章实验结果：是否有不同量化方法的分割实际结果对比图，说明性能差异及本文工作能够起作用的场景。

 6）第4.2节：所使用的量化感知训练和训练后量化策略，如何针对基于U-Net的医学图像分割任务进行改进不是十分明确，缺乏核心公式或算法、原理图的描述和论证。 



（论文撰写相关问题）

 1）摘要第二段：“部署段” 改为 “部署端” 

2）==摘要：需要重写，目前的摘要写法，大部分是在描述研究内容的研究意义、背景、相关已有工作，而对于本文提出的创新性研究工作，只是在最后两段用一两句话描述，无法概括并体现本文研究贡献的创新性和贡献，不符合学术论文摘要的基本写作要求。请采用总分的结构重新改写摘要：第一段话概括研究背景、意义，并概括性地引入本文方法的创新性贡献，然后在第二、三段详细给出本文提出的两个创新性工作的技术贡献。==

3）中英文摘要内容不匹配：例如在英文摘要最后一段，“To our best knowledge, this paper is the FIRST mixed-precision quantization method designed specifically for medical image segmentation with U-Net.”，而在中文摘要并没有对应的内容描述。

 4）第1页：“这些使得神经网络…” 改为 “这些问题使得神经网络” 

5）第3页：“手机，可穿戴设备” 改为 “手机、可穿戴设备”；“手机，嵌入式设备” 改为 “手机、嵌入式设备” 

6) 第8页：“激活值得分布” 改为 “激活值的分布” 

7）表1-4：解释什么是w-bits和a-bits 

8）第13页：“为了方便的介绍” 改为 “为了方便地介绍” 

9）第20页：“神经网路” 改为 “神经网络” 

10）第三章标题：“基于U-Net卷积分离的混合精度量化”

 11）第31页：“图3–1展示了混合精度量化已经对应希望达成的目标”？ 

12）请避免使用SOTA这样的缩写，而翻译成相应的中文意思，例如第32页。 

13）正文中的公式引用请都加上小括号，例如第33页“表达式2-4”，请改为“表达式（2-4）”。

 14）第45页：calibration、train from scratch请翻译成中文。

 15）第5.1节：全文总结部分存在和摘要同样的问题，大部分是在说问题的背景和现有工作，对本文的核心技术和贡献描述只有最后两段文字。 

16）第12页：“并推导了基于Hessian 矩阵的量化敏感衡量与现有的计算Hessian的算法”？  



## 评审意见2

1. 摘要需要重新撰写。目前的摘要包括过多的研究背景和已有技术的介绍，但是对于论文的所研究内容的技术创新点、理论和应用价值描述不足，无法有效地反映本文所形成的技术贡献。

2. 本文主要是针对U-Net的量化，但是对于U-Net的介绍并不充分，例如对于U-Net在当前医学图像分割中的重要性，U-Net方法的描述等没有具体介绍。 
3. 第三章卷积分离的混合精度量化主要出发点基于对U-Net 空间频率信息分析，但是这里多位描述性文字，缺少理论上或者实际应用场景中的实证证据。
4. 第四章的内容撰写过于简单，章节中涉及了量化感知训练和训练后量化两部分内容，但是它们在所提出方法中的关系是什么，是同时选择，可选，还是两者互相矛盾的，进行设计的原则和获得的效果分别是什么？ 
5. 图、表内容应统一为中文。 6. 参考文献中出版刊物的大小写应一致，同时会议论文集有不明意义的[S.1 : s.n.]。 